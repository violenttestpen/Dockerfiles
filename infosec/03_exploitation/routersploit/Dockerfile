FROM alpine:latest AS staging

RUN apk add --no-cache python2 py2-cffi py2-pip bash git g++ make python2-dev libressl-dev ncurses-dev
RUN git clone https://github.com/reverse-shell/routersploit.git /routersploit
RUN pip install --no-cache-dir -r /routersploit/requirements.txt

FROM alpine:latest

RUN apk add --no-cache python2 bash

COPY --from=staging /usr/lib/python2.7/site-packages /usr/lib/python2.7/site-packages
COPY --from=staging /routersploit /routersploit

ENTRYPOINT ["/routersploit/rsf.py"]
