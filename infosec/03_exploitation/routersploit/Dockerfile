FROM alpine:latest AS staging

RUN apk add --no-cache python2 py2-cffi py2-pip bash git g++ make python2-dev libressl-dev ncurses-dev
RUN git clone https://github.com/reverse-shell/routersploit.git /root/routersploit
RUN pip install --no-cache-dir -r /root/routersploit/requirements.txt

FROM alpine:latest

COPY --from=staging /usr/lib/python2.7/site-packages /usr/lib/python2.7/site-packages
COPY --from=staging /root/routersploit /root/routersploit

RUN apk add --no-cache python2

ENTRYPOINT ["/root/routersploit/rsf.py"]
