FROM alpine:latest

RUN apk add --no-cache python2 \
        py2-pip \
        py2-paramiko \
        py2-curl \
        py2-impacket \
        py2-openssl \
        py2-psycopg2 \
        py2-crypto \
        py2-dnspython \
        py2-snmp \
        py2-asn1 \
        python2-dev \
        git \
        gcc \
        mariadb-dev \
        musl-dev \
    && git clone https://github.com/lanjelot/patator.git /patator \
    && ls | grep -v patator.py | xargs rm \
    && apk del --purge py2-pip \
        python2-dev \
        git \
        gcc \ 
        mariadb-dev \
        musl-dev

ENTRYPOINT ["python2"]
CMD ["/patator/patator.py"]
